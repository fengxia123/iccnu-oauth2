{"name":"Iccnu-oauth2","tagline":"iccnu的oauth2认证服务说明文档","body":"# ICCNU Oauth2 Authentication Flow Instruction\r\n\r\n***\r\n\r\n## Before You Begin\r\n  这里是各应用的 OAuth2 的认证流程，而不涉及OAuth2的授权。\r\n  你需要考虑你的应用是哪种情形，分别使用不同的认证方式，其中针对应用的不同类型B/S应用需要参考Authorization Code Flow，C/S应用需要参考Resource Owner Flow；另外针对应用是否已上线并存在用户群体，需要参考不同的创建新用户或banding已有账户的方式。\r\n  \r\n***\r\n\r\n####1.租户为B/S应用\r\n需要参考 Authorization Code Grant Flow，用户在认证站点登录并跳转至您的应用后，应提示用户绑定已有账户或直接创建新用户，后进入登录状态。\r\n####2.租户为C/S应用\r\n需要参考 Resource Owner Flow，用户登录至您的应用后，应提示用户绑定已有账户或直接创建新用户，后进入登录状态。\r\n\r\n##1 租户为B/S应用: Authorization Code Grant Flow\r\n\r\n####使用先决条件\r\n1. 你的用户需要现在ICCNU上注册为用户。\r\n\r\n2. 你需要将你的应用申请成为ICCNU认证服务的租户。\r\n   租户需要为站点提供的信息包括\r\n\r\n   回调地址 \"redirectURI\" : \"http://localhost:8080/account/login\"\r\n   租户应用Id \"id\" : \"code_test\"\r\n   租户应用密码 \"secret\" : *****\r\n   主页地址 \"homeURI\" : \"http://localhost:8080/\"\r\n   租户应用名 \"name\" : \"测试应用名1\"\r\n   租户应用描述 \"description\" : \"这里是测试应用1的描述信息\"\r\n   认证类型 \"authType\" : \"code\"\r\n\r\n   其中，回调地址、租户应用Id及租户应用密码为Authorization Code Grant Flow认证流程中需要用到的必须字段; 主页地址，租户应用名, 租户应用描述为显示给用户的字段，不是必须的；认证类型在Authorization Code Grant Flow中固定为\"Code\"。   \r\n\r\n####认证流程\r\n1 用户点击租户应用网页上的“使用ICCNU账户登录”时，携带租户注册参数（包括回调地址，租户应用Id，认证类型等）跳转到认证页面。\r\n\r\n2 用户登录后，认证页面呈现你的应用信息及用户个人信息，用户授权租户应用（用户授权租户、表示用户允许租户应用通过获得到的AccessToken访问认证主站的服务，包括网盘服务，资源服务等，获得到用户的资源）之后，携带code跳转回你的应用的回调页面。\r\n\r\n3 回调页面在处理逻辑中，携带code及租户的信息（包括回调地址，租户应用Id，租户应用密码，认证类型）及申请访问的服务域（暂为全域）等，调用认证站点的token服务，得到用户的AccessToken。\r\n\r\n4 租户通过AccessToken调用认证站点的Me服务，得到用户的认证信息，认证流程结束。\r\n\r\n此时租户已经知道调用认证站点ICCNU登录的用户的基本信息，可以继续租户自己的业务（绑定已存在的本地用户或者根据登录信息创建用户等等）。\r\n\r\n##1 租户为C/S应用: Resource Owner Flow\r\n\r\n####使用先决条件\r\n1. 你的用户需要现在ICCNU上注册为用户。\r\n\r\n2. 你需要将你的应用申请成为ICCNU认证服务的租户。\r\n   租户需要为站点提供的信息包括\r\n\r\n   租户应用Id \"id\" : \"code_test\"\r\n   租户应用密码 \"secret\" : *****\r\n   主页地址 \"homeURI\" : \"http://localhost:8080/\"\r\n   租户应用名 \"name\" : \"测试应用名1\"\r\n   租户应用描述 \"description\" : \"这里是测试应用1的描述信息\"\r\n   认证类型 \"authType\" : \"resource_owner\"\r\n\r\n   其中，租户应用Id及租户应用密码为Resource Owner Flow认证流程中需要用到的必须字段; 主页地址，租户应用名, 租户应用描述为显示给用户的字段，不是必须的；认证类型在Authorization Code Grant Flow中固定为\"resource_owner\"。   \r\n   C/S应用并不是在浏览器中进行认证流程，所以不需要提供回调地址字段。\r\n\r\n####认证流程\r\n1 用户点击客户端的“使用ICCNU账户登录”时，输入在认证站点上注册的用户名与密码。\r\n\r\n2 客户端在后台携带用户输入的用户名与密码及租户的信息（包括回调地址，租户应用Id，租户应用密码，认证类型）及申请访问的服务域（暂为全域）等，调用认证站点的token服务，得到用户的AccessToken。\r\n\r\n3 租户通过AccessToken调用认证站点的Me服务，得到用户的认证信息，认证流程结束。\r\n\r\n此时租户已经知道调用认证站点ICCNU登录的用户的基本信息，可以继续租户自己的业务（绑定已存在的本地用户或者根据登录信息创建用户等等）。","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}